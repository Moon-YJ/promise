<!DOCTYPE html>
<html lang='en'>

<head>
  <meta charset='UTF-8'>
  <meta name='viewport' content='width=device-width, initial-scale=1.0'>
  <title>Document</title>
</head>

<body>
  <script>
    function test(delay, callback) {
      setTimeout(() => callback(), delay);
    }
    // 결과: start, end, test1, test2 순서로 호출됨
    // 순서1 - start 콘솔 출력 (callstack)
    console.log('start');
    // 순서2 - test함수 호출 (callstack)
    // 순서3 - setTimeout구문 web api에 넘기고 다음코드 바로 실행 (callstack)
    // (web api가 처리하는 업무: DOM, AJAX, Timeout=setTimeout)
    // 순서7 - setTimeout 수행하고 그 안쪽의 test1 콘솔문을 callstack에 전달 (web api)
    // (이때 이미 callstack에서 콘솔 end 업무까지 등록된 상태이기 때문에 그 다음 순서로 호출 대기 -> 단일쓰레드 방식이므로)
    test(2000, () => console.log('test1'));
    // 순서4 - 두번째 test함수 호출 (callstack)
    // 순서5 - setTimeout구문 web api에 넘기고 다음코드 바로 실행 (callstack)
    // 순서8 - setTimeout 수행하고 그 안쪽의 test2 콘솔문을 callstack에 전달 (web api)
    // (이때 이미 callstack에서 콘솔 test1 업무까지 등록된 상태이기 때문에 그 다음 순서로 호출 대기)
    test(2000, () => console.log('test2'));
    // 순서6 - end 콘솔 출력
    console.log('end');
  </script>
</body>

</html>